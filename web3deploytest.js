const Web3 = require('web3');
const HDWalletProvider = require('truffle-hdwallet-provider'); // part of ganache that will provide the accounts to use.
const provider = new HDWalletProvider(
    'oblige gospel dwarf act trouble video tape season second crew similar brisk', // my 12 words mnemonic
    //'https://rinkeby.infura.io/UoLq1d5g8L3cuqKKV5V3'  // infura endpoint for a node that will deploy contract.
    'http://localhost:8545'
);

const web3 = new Web3(provider);
var carinsuranceContract = web3.eth.contract([{"constant":true,"inputs":[],"name":"resolver","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"customer","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"payPremium","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[{"name":"_InsuranceCompany","type":"address"}],"name":"setInsuranceCompany","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"_resolver","type":"address"}],"name":"setResolver","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"approveInsurance","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"insurance_company","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[],"name":"insuranceAmount","outputs":[],"payable":true,"stateMutability":"payable","type":"function"},{"constant":false,"inputs":[],"name":"claimInsurance","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"eligible_for_insurance","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]);
var carinsurance = carinsuranceContract.new(
   {
     from: web3.eth.accounts[0], 
     data: '0x608060405260006003556000600455600060055534801561001f57600080fd5b50336000806101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff1602179055506105178061006f6000396000f3006080604052600436106100a4576000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806304f3bcec146100a95780632804b2c01461010057806329c08ba214610157578063317f11d9146101615780634e543b26146101a457806372a600e6146101e757806376f993f7146101fe578063a74f996514610255578063a75ac6081461025f578063d3a4184014610276575b600080fd5b3480156100b557600080fd5b506100be6102a1565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34801561010c57600080fd5b506101156102c7565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61015f6102ec565b005b34801561016d57600080fd5b506101a2600480360381019080803573ffffffffffffffffffffffffffffffffffffffff169060200190929190505050610304565b005b3480156101b057600080fd5b506101e5600480360381019080803573ffffffffffffffffffffffffffffffffffffffff16906020019092919050505061035c565b005b3480156101f357600080fd5b506101fc6103b4565b005b34801561020a57600080fd5b5061021361041a565b604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b61025d610440565b005b34801561026b57600080fd5b50610274610458565b005b34801561028257600080fd5b5061028b6104e5565b6040518082815260200191505060405180910390f35b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b66470de4df820000341015151561030257600080fd5b565b600060045414156103595780600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060016004819055505b50565b600060055414156103b15780600260006101000a81548173ffffffffffffffffffffffffffffffffffffffff021916908373ffffffffffffffffffffffffffffffffffffffff16021790555060016005819055505b50565b600260009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614151561041057600080fd5b6001600381905550565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b66b1a2bc2ec50000341015151561045657600080fd5b565b600160035414156104e3576000809054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff166108fc3073ffffffffffffffffffffffffffffffffffffffff16319081150290604051600060405180830381858888f193505050501580156104e1573d6000803e3d6000fd5b505b565b600354815600a165627a7a723058206dc0e827655df31c43bd6f358ec6aded154a88af8515e2a66d4b25bfbd2fcdd10029', 
     gas: '4700000'
   }, function (e, contract){
    console.log(e, contract);
    if (typeof contract.address !== 'undefined') {
         console.log('Contract mined! address: ' + contract.address + ' transactionHash: ' + contract.transactionHash);
    }
 })